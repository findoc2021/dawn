/*
Generated time: April 13, 2022 10:00
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class VariantSelects extends HTMLElement{constructor(){super(),this.addEventListener("change",this.onVariantChange)}onVariantChange(){this.updateOptions(),this.updateMasterId(),this.toggleAddButton(!0,"",!1),this.updatePickupAvailability(),this.currentVariant?(this.updateMedia(),this.updateURL(),this.updateVariantInput(),this.renderProductInfo()):(this.toggleAddButton(!0,"",!0),this.setUnavailable())}updateOptions(){this.options=Array.from(this.querySelectorAll("select"),t=>t.value)}updateMasterId(){this.currentVariant=this.getVariantData().find(t=>!t.options.map((t,e)=>this.options[e]===t).includes(!1))}updateMedia(){if(this.currentVariant&&this.currentVariant?.featured_media){var t=document.querySelector(`[data-media-id="${this.dataset.section}-${this.currentVariant.featured_media.id}"]`);if(t){const e=t.parentElement;e.prepend(t),window.setTimeout(()=>{e.scroll(0,0)})}}}updateURL(){this.currentVariant&&window.history.replaceState({},"",this.dataset.url+"?variant="+this.currentVariant.id)}updateVariantInput(){const t=document.querySelectorAll(`#product-form-${this.dataset.section}, #product-form-installment`);t.forEach(t=>{const e=t.querySelector('input[name="id"]');e.value=this.currentVariant.id,e.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){const t=document.querySelector("pickup-availability");t&&(this.currentVariant?.available?t.fetchAvailability(this.currentVariant.id):(t.removeAttribute("available"),t.innerHTML=""))}renderProductInfo(){fetch(`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=`+this.dataset.section).then(t=>t.text()).then(t=>{var e="price-"+this.dataset.section;const a=(new DOMParser).parseFromString(t,"text/html"),i=document.getElementById(e);t=a.getElementById(e);t&&i&&(i.innerHTML=t.innerHTML),document.getElementById("price-"+this.dataset.section)?.classList.remove("visibility-hidden"),this.toggleAddButton(!this.currentVariant.available,window.variantStrings.soldOut)})}toggleAddButton(t=!0,e,a){const i=document.getElementById("product-form-"+this.dataset.section)?.querySelector('[name="add"]');i&&(t?(i.setAttribute("disabled",!0),e&&(i.textContent=e)):(i.removeAttribute("disabled"),i.textContent=window.variantStrings.addToCart))}setUnavailable(){const t=document.getElementById("product-form-"+this.dataset.section)?.querySelector('[name="add"]');t&&(t.textContent=window.variantStrings.unavailable,document.getElementById("price-"+this.dataset.section)?.classList.add("visibility-hidden"))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}}customElements.define("variant-selects",VariantSelects);class VariantRadios extends VariantSelects{constructor(){super()}updateOptions(){const t=Array.from(this.querySelectorAll("fieldset"));this.options=t.map(t=>Array.from(t.querySelectorAll("input")).find(t=>t.checked).value)}}customElements.define("variant-radios",VariantRadios);